# Bolt UI Contract — Accounting API Agreement

## Purpose

This document defines the ONLY allowed interaction between
the Bolt UI and the Accounting Backend.

Bolt is responsible ONLY for:
- UI
- Forms
- Tables
- User interaction

The backend is responsible for:
- Accounting correctness
- Voucher lifecycle
- Debit / Credit logic
- Posting safety

Bolt MUST follow this contract strictly.

---

## Core Principles (Non-Negotiable)

1. Bolt never accesses database tables directly.
2. Bolt never decides debit / credit.
3. Bolt sends business intent only.
4. Backend generates accounting entries deterministically.
5. All vouchers are created as DRAFT first.
6. Posting is a separate, explicit action.
7. Backend is the single source of accounting truth.

---

## Voucher Lifecycle

1. Create voucher as DRAFT
2. Edit voucher while DRAFT
3. Delete voucher while DRAFT
4. Post voucher (DRAFT → POSTED)
5. POSTED vouchers are immutable

Bolt must respect this lifecycle.

---

## Allowed API Endpoints

### 1. Create Draft Voucher

**Endpoint**
POST /api/vouchers/draft


**Purpose**
Create a new DRAFT voucher using business inputs.
Accounting entries are generated by the backend.

**Request Payload**
```json
{
  "voucherType": "SALE | PURCHASE | RECEIPT | PAYMENT",
  "subType": "string",
  "partyId": "string | null",
  "totalAmount": number,
  "paidNow": number | null,
  "paymentMode": "CASH | BANK | null",
  "voucherDate": "YYYY-MM-DD",
  "narration": "string | null"
}
Rules

Bolt MUST NOT send debit / credit.

Bolt MUST NOT send account IDs.

Bolt MUST NOT attempt to infer accounting logic.

Backend decides all accounting entries.

Response

{
  "voucherId": "string",
  "status": "DRAFT"
}
2. Update Draft Voucher
Endpoint

PUT /api/vouchers/draft/:voucherId
Purpose
Update business fields of an existing DRAFT voucher.

Request Payload
Same as Create Draft Voucher.

Rules

Only DRAFT vouchers can be updated.

Backend deletes old entries and regenerates new ones.

Partial mutation of entries is forbidden.

Response

{
  "voucherId": "string",
  "status": "DRAFT"
}
3. Delete Draft Voucher
Endpoint

DELETE /api/vouchers/draft/:voucherId
Purpose
Delete a DRAFT voucher completely.

Rules

Only DRAFT vouchers can be deleted.

POSTED vouchers must never be deleted via this endpoint.

Response

{
  "deleted": true
}
4. Post Voucher
Endpoint

POST /api/vouchers/:voucherId/post
Purpose
Convert a DRAFT voucher into POSTED accounting truth.

Rules

Posting rules are enforced by backend.

Debit = Credit must match.

Voucher number is assigned here.

Operation is atomic (all-or-nothing).

Response

{
  "voucherId": "string",
  "voucherNumber": number,
  "status": "POSTED"
}